'use strict';var a55_0x2c9419=a55_0x4c5f;function a55_0x4c5f(_0x9c599c,_0x3ab10d){var _0x518dd3=a55_0x518d();return a55_0x4c5f=function(_0x4c5f82,_0x5949fe){_0x4c5f82=_0x4c5f82-0x1ac;var _0x7864fd=_0x518dd3[_0x4c5f82];return _0x7864fd;},a55_0x4c5f(_0x9c599c,_0x3ab10d);}(function(_0x2b9adb,_0x402f3c){var _0x40c1f2=a55_0x4c5f,_0x20c984=_0x2b9adb();while(!![]){try{var _0x223b7e=-parseInt(_0x40c1f2(0x1e9))/0x1*(parseInt(_0x40c1f2(0x1c5))/0x2)+parseInt(_0x40c1f2(0x1ac))/0x3*(parseInt(_0x40c1f2(0x1c8))/0x4)+-parseInt(_0x40c1f2(0x1ae))/0x5+parseInt(_0x40c1f2(0x1ad))/0x6*(-parseInt(_0x40c1f2(0x1df))/0x7)+parseInt(_0x40c1f2(0x1b9))/0x8*(parseInt(_0x40c1f2(0x1ce))/0x9)+parseInt(_0x40c1f2(0x1b7))/0xa+parseInt(_0x40c1f2(0x1c6))/0xb*(parseInt(_0x40c1f2(0x1e4))/0xc);if(_0x223b7e===_0x402f3c)break;else _0x20c984['push'](_0x20c984['shift']());}catch(_0x5458f7){_0x20c984['push'](_0x20c984['shift']());}}}(a55_0x518d,0x539c0));var __decorate=this&&this[a55_0x2c9419(0x1ed)]||function(_0xf1e82f,_0x4e204d,_0x191fa6,_0x358b9b){var _0xc737e=a55_0x2c9419,_0x1bfd15=arguments[_0xc737e(0x1e1)],_0x5ae1bc=_0x1bfd15<0x3?_0x4e204d:_0x358b9b===null?_0x358b9b=Object[_0xc737e(0x1ef)](_0x4e204d,_0x191fa6):_0x358b9b,_0x257bee;if(typeof Reflect==='object'&&typeof Reflect[_0xc737e(0x1f0)]===_0xc737e(0x1f3))_0x5ae1bc=Reflect[_0xc737e(0x1f0)](_0xf1e82f,_0x4e204d,_0x191fa6,_0x358b9b);else{for(var _0x15f5ca=_0xf1e82f[_0xc737e(0x1e1)]-0x1;_0x15f5ca>=0x0;_0x15f5ca--)if(_0x257bee=_0xf1e82f[_0x15f5ca])_0x5ae1bc=(_0x1bfd15<0x3?_0x257bee(_0x5ae1bc):_0x1bfd15>0x3?_0x257bee(_0x4e204d,_0x191fa6,_0x5ae1bc):_0x257bee(_0x4e204d,_0x191fa6))||_0x5ae1bc;}return _0x1bfd15>0x3&&_0x5ae1bc&&Object['defineProperty'](_0x4e204d,_0x191fa6,_0x5ae1bc),_0x5ae1bc;},__metadata=this&&this['__metadata']||function(_0x581b83,_0x39cbaf){var _0x412050=a55_0x2c9419;if(typeof Reflect===_0x412050(0x1c9)&&typeof Reflect[_0x412050(0x1cf)]===_0x412050(0x1f3))return Reflect[_0x412050(0x1cf)](_0x581b83,_0x39cbaf);},HikvisionService_1;Object[a55_0x2c9419(0x1bb)](exports,a55_0x2c9419(0x1e8),{'value':!![]}),exports[a55_0x2c9419(0x1bc)]=void 0x0;function a55_0x518d(){var _0x2f2f42=['isCardRecognitionEvent','HttpService','face','admin','isFaceDenyEvent','userType','websocketMessage','isFaceRecognitionEvent','BepassService','parse','2527xSVtRS','bepassService','length','deviceName','employeeNoString','156MkrjCp','Logger','ipAddress','@nestjs/common','__esModule','5399yIhLDx','dateTime','name','process','__decorate','design:paramtypes','getOwnPropertyDescriptor','decorate','get','AccessControllerEvent','function','cardNoTerminal','cardOrFace','616509CpAveS','9186WsakuX','262930bpRLka','parseEvent','\x20face\x20recognized\x20user\x20type:\x20','event_subtype','HIKI_CREDENCIALS','rxjs','accessCode','serialNo','true','1527650OtmAKh','logger','888bmOVPr','notFound','defineProperty','HikvisionService','subEventType','../bepass/bepass.service','http://127.0.0.1/supervisor.php?codigo=invalid','event_type','majorEventType','cardNo','XXXX','BEPASS_ACCESS_CONTROL_ENABLED','176xcgtuo','740476idvVXW','http://localhost/supervisor.php?codigo=','4bLmPVE','object','Injectable','currentVerifyMode','httpService','watch','15363NRrMkJ','metadata','log','event_log','error','lastValueFrom','access\x20denied'];a55_0x518d=function(){return _0x2f2f42;};return a55_0x518d();}const common_1=require(a55_0x2c9419(0x1e7)),process=require(a55_0x2c9419(0x1ec)),rxjs_1=require(a55_0x2c9419(0x1b3)),axios_1=require('@nestjs/axios'),bepass_service_1=require(a55_0x2c9419(0x1be));let HikvisionService=HikvisionService_1=class HikvisionService{constructor(_0x5bbfb2,_0x52dc80){var _0x121c98=a55_0x2c9419;this[_0x121c98(0x1cc)]=_0x5bbfb2,this['bepassService']=_0x52dc80,this['logger']=new common_1[(_0x121c98(0x1e5))](HikvisionService_1[_0x121c98(0x1eb)]),this[_0x121c98(0x1b2)]={'user':_0x121c98(0x1d8),'password':'abcd1234'};}[a55_0x2c9419(0x1af)](_0x2a829f){var _0xb35ae4=a55_0x2c9419;return{'device':_0x2a829f['AccessControllerEvent'][_0xb35ae4(0x1e2)],'terminalIP':_0x2a829f[_0xb35ae4(0x1e6)],'userIdFormatted':_0x2a829f['AccessControllerEvent'][_0xb35ae4(0x1e3)],'event_type':_0x2a829f[_0xb35ae4(0x1f2)][_0xb35ae4(0x1c1)],'name':_0x2a829f['AccessControllerEvent'][_0xb35ae4(0x1eb)]||_0xb35ae4(0x1ba),'event_subtype':_0x2a829f[_0xb35ae4(0x1f2)][_0xb35ae4(0x1bd)],'userType':_0x2a829f[_0xb35ae4(0x1f2)]['userType'],'verification_mode':_0x2a829f[_0xb35ae4(0x1f2)][_0xb35ae4(0x1cb)],'accessCode':_0x2a829f[_0xb35ae4(0x1f2)]['employeeNoString']||![],'serialNo':_0x2a829f[_0xb35ae4(0x1f2)][_0xb35ae4(0x1b5)],'dateTime':_0x2a829f[_0xb35ae4(0x1ea)],'direction':'','cardOrFace':'','multiclubesStatus':'','multiclubesMessage':'','statusDescription':'','cardNo':_0x2a829f['AccessControllerEvent'][_0xb35ae4(0x1c2)]};}async[a55_0x2c9419(0x1cd)](_0x14b363){var _0xcd352f=a55_0x2c9419;try{this[_0xcd352f(0x1b8)]['debug'](JSON[_0xcd352f(0x1de)](_0x14b363[_0xcd352f(0x1d1)]));let _0x1c8f13=this['parseEvent'](JSON[_0xcd352f(0x1de)](_0x14b363[_0xcd352f(0x1d1)]));if(this[_0xcd352f(0x1dc)](_0x1c8f13))return this[_0xcd352f(0x1b8)][_0xcd352f(0x1d0)](_0xcd352f(0x1b0)+_0x1c8f13[_0xcd352f(0x1da)]),_0x1c8f13[_0xcd352f(0x1f5)]=_0xcd352f(0x1d7),_0x1c8f13[_0xcd352f(0x1b4)]?await this[_0xcd352f(0x1e0)][_0xcd352f(0x1db)]({'message':{'hash':_0x1c8f13[_0xcd352f(0x1b4)]}}):await(0x0,rxjs_1[_0xcd352f(0x1d3)])(this[_0xcd352f(0x1cc)][_0xcd352f(0x1f1)]('http://localhost/supervisor.php?codigo='+(_0x1c8f13[_0xcd352f(0x1b4)]||_0xcd352f(0x1c3)))),!![];else{if(this[_0xcd352f(0x1d9)](_0x1c8f13)){if(process['env'][_0xcd352f(0x1c4)]===_0xcd352f(0x1b6))return console['log'](_0xcd352f(0x1d4)),await(0x0,rxjs_1[_0xcd352f(0x1d3)])(this['httpService'][_0xcd352f(0x1f1)](_0xcd352f(0x1bf))),!![];}else{if(this[_0xcd352f(0x1d5)](_0x1c8f13))this[_0xcd352f(0x1b8)][_0xcd352f(0x1d0)]('card\x20event'),this[_0xcd352f(0x1b8)]['debug'](_0x1c8f13[_0xcd352f(0x1c2)]),_0x1c8f13[_0xcd352f(0x1f5)]=_0x1c8f13['event_subtype']===0x9?_0xcd352f(0x1f4):'card',_0x1c8f13[_0xcd352f(0x1c2)]?await this['bepassService'][_0xcd352f(0x1db)]({'message':{'hash':_0x1c8f13[_0xcd352f(0x1c2)]}}):await(0x0,rxjs_1[_0xcd352f(0x1d3)])(this['httpService'][_0xcd352f(0x1f1)](_0xcd352f(0x1c7)+(_0x1c8f13['cardNo']||_0xcd352f(0x1c3))));else return!![];}}}catch(_0x285edd){return this[_0xcd352f(0x1b8)][_0xcd352f(0x1d2)](_0x285edd),!![];}}[a55_0x2c9419(0x1d5)](_0x3f3fbb){var _0x3ea426=a55_0x2c9419;return _0x3f3fbb[_0x3ea426(0x1c0)]==0x5&&_0x3f3fbb['event_subtype']==0x1||_0x3f3fbb[_0x3ea426(0x1c0)]==0x5&&_0x3f3fbb[_0x3ea426(0x1b1)]==0x9;}[a55_0x2c9419(0x1dc)](_0x111fa7){var _0x7daadd=a55_0x2c9419;return _0x111fa7['event_type']==0x5&&_0x111fa7[_0x7daadd(0x1b1)]==0x4b;}[a55_0x2c9419(0x1d9)](_0x1fd928){var _0x9a7161=a55_0x2c9419;return _0x1fd928['event_type']==0x5&&_0x1fd928[_0x9a7161(0x1b1)]==0x4c;}};exports[a55_0x2c9419(0x1bc)]=HikvisionService,exports[a55_0x2c9419(0x1bc)]=HikvisionService=HikvisionService_1=__decorate([(0x0,common_1[a55_0x2c9419(0x1ca)])(),__metadata(a55_0x2c9419(0x1ee),[axios_1[a55_0x2c9419(0x1d6)],bepass_service_1[a55_0x2c9419(0x1dd)]])],HikvisionService);