'use strict';const a13_0x3617b9=a13_0x7df1;(function(_0x5af7de,_0x57e81a){const _0x363509=a13_0x7df1,_0x7c03f7=_0x5af7de();while(!![]){try{const _0x168760=parseInt(_0x363509(0x1df))/0x1*(parseInt(_0x363509(0x21a))/0x2)+-parseInt(_0x363509(0x203))/0x3*(-parseInt(_0x363509(0x1f7))/0x4)+-parseInt(_0x363509(0x224))/0x5*(-parseInt(_0x363509(0x229))/0x6)+-parseInt(_0x363509(0x22c))/0x7+-parseInt(_0x363509(0x205))/0x8*(-parseInt(_0x363509(0x1e8))/0x9)+-parseInt(_0x363509(0x223))/0xa+parseInt(_0x363509(0x1e7))/0xb*(parseInt(_0x363509(0x1f1))/0xc);if(_0x168760===_0x57e81a)break;else _0x7c03f7['push'](_0x7c03f7['shift']());}catch(_0x4e6d2e){_0x7c03f7['push'](_0x7c03f7['shift']());}}}(a13_0x2cb4,0x76f58));function a13_0x7df1(_0x1bf54b,_0x11b552){const _0x2cb4a7=a13_0x2cb4();return a13_0x7df1=function(_0x7df113,_0x5b91dd){_0x7df113=_0x7df113-0x1df;let _0x1f3c6a=_0x2cb4a7[_0x7df113];return _0x1f3c6a;},a13_0x7df1(_0x1bf54b,_0x11b552);}var __decorate=this&&this[a13_0x3617b9(0x21f)]||function(_0x429888,_0x522fd7,_0x593085,_0x3b134e){const _0x2c1d01=a13_0x3617b9;var _0x3666f4=arguments[_0x2c1d01(0x1e5)],_0x48a165=_0x3666f4<0x3?_0x522fd7:_0x3b134e===null?_0x3b134e=Object['getOwnPropertyDescriptor'](_0x522fd7,_0x593085):_0x3b134e,_0x4742be;if(typeof Reflect==='object'&&typeof Reflect[_0x2c1d01(0x211)]==='function')_0x48a165=Reflect[_0x2c1d01(0x211)](_0x429888,_0x522fd7,_0x593085,_0x3b134e);else{for(var _0x5817f9=_0x429888[_0x2c1d01(0x1e5)]-0x1;_0x5817f9>=0x0;_0x5817f9--)if(_0x4742be=_0x429888[_0x5817f9])_0x48a165=(_0x3666f4<0x3?_0x4742be(_0x48a165):_0x3666f4>0x3?_0x4742be(_0x522fd7,_0x593085,_0x48a165):_0x4742be(_0x522fd7,_0x593085))||_0x48a165;}return _0x3666f4>0x3&&_0x48a165&&Object['defineProperty'](_0x522fd7,_0x593085,_0x48a165),_0x48a165;},__metadata=this&&this[a13_0x3617b9(0x1e9)]||function(_0x3a9b16,_0x59f8e1){const _0x300181=a13_0x3617b9;if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect[_0x300181(0x1e2)](_0x3a9b16,_0x59f8e1);},IntelbrasService_1;function a13_0x2cb4(){const _0x2f7f28=['913OiVBcL','5049jhbuij','__metadata','Logger','@nestjs/common','error-ip','printDataReceived','name','split','validateOnBeka','185568APfAxK','main','--myboundary\x0d\x0a','design:paramtypes','parseData','CardName','1124CfCJMi','get','ledDenyEntrance','CardNo','Events','http://127.0.0.1:5000/denied','status','post','success','http://10.17.50.2:3002/tickets/document','log','__esModule','2127UesHol','beka\x20response\x20status\x20','1368GODLHr','Interface\x20\x27','@nestjs/axios','error','toString','validateTicket','stringify','card:\x20','HttpService','Content-Type','includes','http://10.17.50.2:3002/tickets/checkin','decorate','checkinOnBeka','error\x20on\x20beka....\x20o.O','warn','id:\x20','env','Method','....validation\x20on\x20beka...','data','42rkyVkn','join','internal','ledDoubleEntrance','httpService','__decorate','family','default','totem_id','7614910HHafhB','2260JdRbrE','double_entry','verbose','lastValueFrom','logger','2508XYFVwK','address','beka\x20response\x20','6266708qeDTAG','UserID','Data','Injectable','IPv4','17923GlVKBZ','TOTEM','IntelbrasService','metadata','Method:\x20','image/jpeg','length','http://127.0.0.1:5000/allowed'];a13_0x2cb4=function(){return _0x2f7f28;};return a13_0x2cb4();}Object['defineProperty'](exports,a13_0x3617b9(0x202),{'value':!![]}),exports[a13_0x3617b9(0x1e1)]=void 0x0;const common_1=require(a13_0x3617b9(0x1eb)),rxjs_1=require('rxjs'),axios_1=require(a13_0x3617b9(0x207)),os_1=require('os');let IntelbrasService=IntelbrasService_1=class IntelbrasService{constructor(_0x2f7baa){const _0x2b829b=a13_0x3617b9;this[_0x2b829b(0x21e)]=_0x2f7baa,this[_0x2b829b(0x228)]=new common_1[(_0x2b829b(0x1ea))](IntelbrasService_1[_0x2b829b(0x1ee)]);}[a13_0x3617b9(0x1f5)](_0x4e7180){const _0x5f1229=a13_0x3617b9,_0x236a71=_0x4e7180[_0x5f1229(0x209)]()[_0x5f1229(0x1ef)](_0x5f1229(0x1f3));if(_0x236a71){let _0x5ab2f7;for(const _0x1fa6c6 of _0x236a71){if(_0x1fa6c6[_0x5f1229(0x20f)](_0x5f1229(0x20e))){const _0x30213a=_0x1fa6c6['split']('\x0d\x0a'),_0x5eee14=_0x30213a[0x0]['split'](':\x20')[0x1];if(_0x5eee14==_0x5f1229(0x1e4)){}else _0x5ab2f7=_0x30213a['slice'](0x3,-0x1)[_0x5f1229(0x21b)]('\x0d\x0a');}}return _0x5ab2f7;}else return![];}[a13_0x3617b9(0x1ed)](_0x52e0f7){const _0x1daba6=a13_0x3617b9;var _0x523b8d,_0x52195c,_0x1df5b6,_0x3aa365;this[_0x1daba6(0x228)][_0x1daba6(0x226)]('name:\x20'+((_0x523b8d=_0x52e0f7[_0x1daba6(0x1fb)][0x0][_0x1daba6(0x22e)])===null||_0x523b8d===void 0x0?void 0x0:_0x523b8d[_0x1daba6(0x1f6)])),this[_0x1daba6(0x228)]['verbose'](_0x1daba6(0x20c)+((_0x52195c=_0x52e0f7[_0x1daba6(0x1fb)][0x0][_0x1daba6(0x22e)])===null||_0x52195c===void 0x0?void 0x0:_0x52195c[_0x1daba6(0x1fa)])),this[_0x1daba6(0x228)][_0x1daba6(0x226)](_0x1daba6(0x215)+((_0x1df5b6=_0x52e0f7[_0x1daba6(0x1fb)][0x0]['Data'])===null||_0x1df5b6===void 0x0?void 0x0:_0x1df5b6[_0x1daba6(0x22d)])),this[_0x1daba6(0x228)][_0x1daba6(0x226)](_0x1daba6(0x1e3)+((_0x3aa365=_0x52e0f7[_0x1daba6(0x1fb)][0x0][_0x1daba6(0x22e)])===null||_0x3aa365===void 0x0?void 0x0:_0x3aa365[_0x1daba6(0x217)]));}async[a13_0x3617b9(0x20a)](_0xd0d2d4,_0x147433){const _0x388f8b=a13_0x3617b9;try{if(_0xd0d2d4){this[_0x388f8b(0x228)][_0x388f8b(0x201)](_0x388f8b(0x218)),this[_0x388f8b(0x228)]['log'](_0xd0d2d4),this[_0x388f8b(0x228)][_0x388f8b(0x201)](_0x147433),this[_0x388f8b(0x228)]['log'](process[_0x388f8b(0x216)][_0x388f8b(0x1e0)]||'totem_id');const _0x838f7c={'hash':_0xd0d2d4,'checkInType':_0x147433,'checkInDevice':process['env'][_0x388f8b(0x1e0)]||_0x388f8b(0x222),'gateId':_0x388f8b(0x1f2)};this[_0x388f8b(0x228)][_0x388f8b(0x226)](_0x838f7c);const _0x4716b4=await this[_0x388f8b(0x1f0)](_0x838f7c);this['logger'][_0x388f8b(0x214)](_0x4716b4[_0x388f8b(0x1fd)]);switch(_0x4716b4[_0x388f8b(0x1fd)]){case _0x388f8b(0x1ff):await this['ledAllowEntrance'](),this[_0x388f8b(0x212)](_0x838f7c);break;case _0x388f8b(0x225):await this[_0x388f8b(0x21d)]();break;default:await this[_0x388f8b(0x1f9)]();}}else return![];}catch(_0x391d18){this['logger'][_0x388f8b(0x208)](_0x388f8b(0x213)),this[_0x388f8b(0x228)][_0x388f8b(0x208)](JSON[_0x388f8b(0x20b)](_0x391d18));}}async['validateOnBeka'](_0x3599c6){const _0x52bf58=a13_0x3617b9;this['logger'][_0x52bf58(0x226)](_0x3599c6);const _0x4b0530=await(0x0,rxjs_1[_0x52bf58(0x227)])(this[_0x52bf58(0x21e)]['post'](_0x52bf58(0x200),_0x3599c6));return this[_0x52bf58(0x228)][_0x52bf58(0x201)](_0x52bf58(0x204)+_0x4b0530['status']),this[_0x52bf58(0x228)][_0x52bf58(0x201)]('beka\x20response\x20'+JSON[_0x52bf58(0x20b)](_0x4b0530===null||_0x4b0530===void 0x0?void 0x0:_0x4b0530[_0x52bf58(0x219)])),_0x4b0530===null||_0x4b0530===void 0x0?void 0x0:_0x4b0530[_0x52bf58(0x219)];}async[a13_0x3617b9(0x212)](_0x3fe240){const _0x5237ac=a13_0x3617b9;this[_0x5237ac(0x228)][_0x5237ac(0x226)](_0x3fe240);const _0x49063b=await(0x0,rxjs_1['lastValueFrom'])(this[_0x5237ac(0x21e)][_0x5237ac(0x1fe)](_0x5237ac(0x210),_0x3fe240));return this[_0x5237ac(0x228)]['log'](_0x5237ac(0x204)+_0x49063b[_0x5237ac(0x1fd)]),this[_0x5237ac(0x228)]['log'](_0x5237ac(0x22b)+JSON['stringify'](_0x49063b===null||_0x49063b===void 0x0?void 0x0:_0x49063b[_0x5237ac(0x219)])),_0x49063b===null||_0x49063b===void 0x0?void 0x0:_0x49063b[_0x5237ac(0x219)];}async[a13_0x3617b9(0x21d)](){const _0x4bcb4f=a13_0x3617b9;try{return await(0x0,rxjs_1['lastValueFrom'])(this['httpService']['get']('http://127.0.0.1:5000/doublentry'));}catch(_0x5879c1){return this['logger'][_0x4bcb4f(0x208)](_0x5879c1),![];}}async['ledAllowEntrance'](){const _0x5a4728=a13_0x3617b9;try{return await(0x0,rxjs_1[_0x5a4728(0x227)])(this[_0x5a4728(0x21e)][_0x5a4728(0x1f8)](_0x5a4728(0x1e6)));}catch(_0x5802ac){return this['logger'][_0x5a4728(0x208)](_0x5802ac),![];}}async[a13_0x3617b9(0x1f9)](){const _0x43fe19=a13_0x3617b9;try{return await(0x0,rxjs_1[_0x43fe19(0x227)])(this[_0x43fe19(0x21e)]['get'](_0x43fe19(0x1fc)));}catch(_0x57178f){return this['logger'][_0x43fe19(0x208)](_0x57178f),![];}}['getLocalIpAddresses'](_0x598473){const _0x2f8310=a13_0x3617b9,_0x25b188=os_1[_0x2f8310(0x221)]['networkInterfaces'](),_0x10425b=_0x25b188[_0x598473];if(!_0x10425b)return console[_0x2f8310(0x214)](_0x2f8310(0x206)+_0x598473+'\x27\x20not\x20found.'),null;for(const _0x4bedde of _0x10425b){if(_0x4bedde[_0x2f8310(0x220)]===_0x2f8310(0x230)&&!_0x4bedde[_0x2f8310(0x21c)])return _0x4bedde[_0x2f8310(0x22a)];}return console[_0x2f8310(0x214)]('No\x20IPv4\x20address\x20found\x20for\x20interface\x20\x27'+_0x598473+'\x27.'),_0x2f8310(0x1ec);}};IntelbrasService=IntelbrasService_1=__decorate([(0x0,common_1[a13_0x3617b9(0x22f)])(),__metadata(a13_0x3617b9(0x1f4),[axios_1[a13_0x3617b9(0x20d)]])],IntelbrasService),exports[a13_0x3617b9(0x1e1)]=IntelbrasService;