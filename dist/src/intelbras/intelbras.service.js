'use strict';const a13_0x33396=a13_0x4a0a;function a13_0x4a0a(_0x248f94,_0x56cf49){const _0x2a2edd=a13_0x2a2e();return a13_0x4a0a=function(_0x4a0a6e,_0x389c39){_0x4a0a6e=_0x4a0a6e-0xdf;let _0x2a950b=_0x2a2edd[_0x4a0a6e];return _0x2a950b;},a13_0x4a0a(_0x248f94,_0x56cf49);}(function(_0x5dbe5e,_0x3ff27b){const _0x502835=a13_0x4a0a,_0x57a001=_0x5dbe5e();while(!![]){try{const _0x3197e1=-parseInt(_0x502835(0xf1))/0x1*(parseInt(_0x502835(0x10e))/0x2)+parseInt(_0x502835(0x12d))/0x3*(parseInt(_0x502835(0x115))/0x4)+-parseInt(_0x502835(0x121))/0x5+-parseInt(_0x502835(0x129))/0x6+-parseInt(_0x502835(0xe9))/0x7+-parseInt(_0x502835(0xfe))/0x8*(parseInt(_0x502835(0x10a))/0x9)+parseInt(_0x502835(0x108))/0xa;if(_0x3197e1===_0x3ff27b)break;else _0x57a001['push'](_0x57a001['shift']());}catch(_0x48ef01){_0x57a001['push'](_0x57a001['shift']());}}}(a13_0x2a2e,0x7547a));var __decorate=this&&this[a13_0x33396(0x125)]||function(_0x12c6c2,_0x5e6ef0,_0x3bb8c3,_0x22312f){const _0x2c1b10=a13_0x33396;var _0x309f42=arguments[_0x2c1b10(0xf4)],_0x574ec2=_0x309f42<0x3?_0x5e6ef0:_0x22312f===null?_0x22312f=Object['getOwnPropertyDescriptor'](_0x5e6ef0,_0x3bb8c3):_0x22312f,_0x124288;if(typeof Reflect===_0x2c1b10(0x10d)&&typeof Reflect[_0x2c1b10(0x113)]==='function')_0x574ec2=Reflect[_0x2c1b10(0x113)](_0x12c6c2,_0x5e6ef0,_0x3bb8c3,_0x22312f);else{for(var _0x5806c0=_0x12c6c2[_0x2c1b10(0xf4)]-0x1;_0x5806c0>=0x0;_0x5806c0--)if(_0x124288=_0x12c6c2[_0x5806c0])_0x574ec2=(_0x309f42<0x3?_0x124288(_0x574ec2):_0x309f42>0x3?_0x124288(_0x5e6ef0,_0x3bb8c3,_0x574ec2):_0x124288(_0x5e6ef0,_0x3bb8c3))||_0x574ec2;}return _0x309f42>0x3&&_0x574ec2&&Object[_0x2c1b10(0xeb)](_0x5e6ef0,_0x3bb8c3,_0x574ec2),_0x574ec2;},__metadata=this&&this[a13_0x33396(0xf8)]||function(_0x4f8461,_0x453000){const _0x14d700=a13_0x33396;if(typeof Reflect===_0x14d700(0x10d)&&typeof Reflect[_0x14d700(0xf0)]===_0x14d700(0xe4))return Reflect[_0x14d700(0xf0)](_0x4f8461,_0x453000);},IntelbrasService_1;Object[a13_0x33396(0xeb)](exports,a13_0x33396(0xea),{'value':!![]}),exports[a13_0x33396(0x12e)]=void 0x0;const common_1=require(a13_0x33396(0x11f)),rxjs_1=require(a13_0x33396(0x123)),axios_1=require(a13_0x33396(0x103)),os_1=require('os');function a13_0x2a2e(){const _0x44c0a1=['Injectable','Content-Type','@nestjs/common','....validation\x20on\x20beka...','4786555OlyUnR','error','rxjs','double_entry','__decorate','name','ledAllowEntrance','post','2618508eIeUGN','card:\x20','HttpService','design:paramtypes','6PMsgTw','IntelbrasService','getLocalIpAddresses','toString','default','family','status','Method','function','Data','http://127.0.0.1:5000/doublentry','split','warn','6013938bDExzS','__esModule','defineProperty','success','validateOnBeka','\x27\x20not\x20found.','parseData','metadata','34cXJxVx','http://127.0.0.1:5000/denied','CardNo','length','get','networkInterfaces','CardName','__metadata','--myboundary\x0d\x0a','http://10.17.50.2:3002/tickets/document','main','log','name:\x20','24xkjSzW','IPv4','checkinOnBeka','join','lastValueFrom','@nestjs/axios','ledDenyEntrance','Method:\x20','data','ledDoubleEntrance','25095890Wzajhz','printDataReceived','1902132JMZMpa','slice','image/jpeg','object','4644dOxMrX','logger','stringify','id:\x20','validateTicket','decorate','Interface\x20\x27','1873288miScle','eth0','httpService','verbose','http://10.17.50.2:3002/tickets/checkin','UserID','Events','error-ip'];a13_0x2a2e=function(){return _0x44c0a1;};return a13_0x2a2e();}let IntelbrasService=IntelbrasService_1=class IntelbrasService{constructor(_0xc47aea){const _0x29b74b=a13_0x33396;this[_0x29b74b(0x117)]=_0xc47aea,this[_0x29b74b(0x10f)]=new common_1['Logger'](IntelbrasService_1[_0x29b74b(0x126)]);}[a13_0x33396(0xef)](_0x489816){const _0x3e4147=a13_0x33396,_0x69396b=_0x489816[_0x3e4147(0xdf)]()[_0x3e4147(0xe7)](_0x3e4147(0xf9));if(_0x69396b){let _0x44ff32;for(const _0x5aa49e of _0x69396b){if(_0x5aa49e['includes'](_0x3e4147(0x11e))){const _0x81bd34=_0x5aa49e['split']('\x0d\x0a'),_0xbc852a=_0x81bd34[0x0][_0x3e4147(0xe7)](':\x20')[0x1];if(_0xbc852a==_0x3e4147(0x10c)){}else _0x44ff32=_0x81bd34[_0x3e4147(0x10b)](0x3,-0x1)[_0x3e4147(0x101)]('\x0d\x0a');}}return _0x44ff32;}else return![];}[a13_0x33396(0x109)](_0x37d101){const _0x6aa2e6=a13_0x33396;var _0x7ede0d,_0x16e194,_0x5d1b34,_0x575fc1;this[_0x6aa2e6(0x10f)][_0x6aa2e6(0x118)](_0x6aa2e6(0xfd)+((_0x7ede0d=_0x37d101['Events'][0x0][_0x6aa2e6(0xe5)])===null||_0x7ede0d===void 0x0?void 0x0:_0x7ede0d[_0x6aa2e6(0xf7)])),this[_0x6aa2e6(0x10f)][_0x6aa2e6(0x118)](_0x6aa2e6(0x12a)+((_0x16e194=_0x37d101[_0x6aa2e6(0x11b)][0x0]['Data'])===null||_0x16e194===void 0x0?void 0x0:_0x16e194[_0x6aa2e6(0xf3)])),this[_0x6aa2e6(0x10f)][_0x6aa2e6(0x118)](_0x6aa2e6(0x111)+((_0x5d1b34=_0x37d101[_0x6aa2e6(0x11b)][0x0][_0x6aa2e6(0xe5)])===null||_0x5d1b34===void 0x0?void 0x0:_0x5d1b34[_0x6aa2e6(0x11a)])),this[_0x6aa2e6(0x10f)][_0x6aa2e6(0x118)](_0x6aa2e6(0x105)+((_0x575fc1=_0x37d101['Events'][0x0]['Data'])===null||_0x575fc1===void 0x0?void 0x0:_0x575fc1[_0x6aa2e6(0xe3)]));}async[a13_0x33396(0x112)](_0x5abe8d,_0x275ac8){const _0x37b730=a13_0x33396;try{if(_0x5abe8d){this[_0x37b730(0x10f)]['log'](_0x37b730(0x120)),this['logger']['log'](_0x5abe8d),this[_0x37b730(0x10f)][_0x37b730(0xfc)](_0x275ac8),this[_0x37b730(0x10f)]['log'](this[_0x37b730(0x12f)](_0x37b730(0x116)));const _0x5f4e96={'hash':_0x5abe8d,'checkInType':_0x275ac8,'checkInDevice':this['getLocalIpAddresses'](_0x37b730(0x116)),'gateId':_0x37b730(0xfb)};this[_0x37b730(0x10f)]['verbose'](_0x5f4e96);const _0x5e0d9d=await this[_0x37b730(0xed)](_0x5f4e96);switch(_0x5e0d9d[_0x37b730(0xe2)]){case _0x37b730(0xec):this[_0x37b730(0x127)](),this['checkinOnBeka'](_0x5f4e96);break;case _0x37b730(0x124):this[_0x37b730(0x107)]();break;default:this['ledDenyEntrance']();}}else return![];}catch(_0x540626){this['logger'][_0x37b730(0x122)]('error\x20on\x20beka....\x20o.O'),this[_0x37b730(0x10f)][_0x37b730(0x122)](JSON[_0x37b730(0x110)](_0x540626));}}async[a13_0x33396(0xed)](_0x21816c){const _0x3bc676=a13_0x33396;this[_0x3bc676(0x10f)][_0x3bc676(0x118)](_0x21816c);const _0x1e6596=await(0x0,rxjs_1[_0x3bc676(0x102)])(this[_0x3bc676(0x117)][_0x3bc676(0x128)](_0x3bc676(0xfa),_0x21816c));return this['logger'][_0x3bc676(0xfc)]('beka\x20response\x20status\x20'+_0x1e6596[_0x3bc676(0xe2)]),this[_0x3bc676(0x10f)][_0x3bc676(0xfc)]('beka\x20response\x20'+JSON['stringify'](_0x1e6596===null||_0x1e6596===void 0x0?void 0x0:_0x1e6596[_0x3bc676(0x106)])),_0x1e6596===null||_0x1e6596===void 0x0?void 0x0:_0x1e6596['data'];}async[a13_0x33396(0x100)](_0x52c137){const _0x1b963a=a13_0x33396;this[_0x1b963a(0x10f)][_0x1b963a(0x118)](_0x52c137);const _0x5213ec=await(0x0,rxjs_1['lastValueFrom'])(this[_0x1b963a(0x117)][_0x1b963a(0x128)](_0x1b963a(0x119),_0x52c137));return this[_0x1b963a(0x10f)]['log']('beka\x20response\x20status\x20'+_0x5213ec[_0x1b963a(0xe2)]),this['logger'][_0x1b963a(0xfc)]('beka\x20response\x20'+JSON['stringify'](_0x5213ec===null||_0x5213ec===void 0x0?void 0x0:_0x5213ec[_0x1b963a(0x106)])),_0x5213ec===null||_0x5213ec===void 0x0?void 0x0:_0x5213ec[_0x1b963a(0x106)];}async[a13_0x33396(0x107)](){const _0x324fb5=a13_0x33396;try{return await(0x0,rxjs_1[_0x324fb5(0x102)])(this[_0x324fb5(0x117)][_0x324fb5(0xf5)](_0x324fb5(0xe6)));}catch(_0x5248ff){return this[_0x324fb5(0x10f)][_0x324fb5(0x122)](_0x5248ff),![];}}async[a13_0x33396(0x127)](){const _0x4d88cd=a13_0x33396;try{return await(0x0,rxjs_1['lastValueFrom'])(this[_0x4d88cd(0x117)]['get']('http://127.0.0.1:5000/allowed'));}catch(_0x5c3b41){return this[_0x4d88cd(0x10f)][_0x4d88cd(0x122)](_0x5c3b41),![];}}async[a13_0x33396(0x104)](){const _0x2963ba=a13_0x33396;try{return await(0x0,rxjs_1['lastValueFrom'])(this[_0x2963ba(0x117)]['get'](_0x2963ba(0xf2)));}catch(_0x465212){return this[_0x2963ba(0x10f)][_0x2963ba(0x122)](_0x465212),![];}}[a13_0x33396(0x12f)](_0x2c7708){const _0x2efda8=a13_0x33396,_0xf124b4=os_1[_0x2efda8(0xe0)][_0x2efda8(0xf6)](),_0x3af609=_0xf124b4[_0x2c7708];if(!_0x3af609)return console['warn'](_0x2efda8(0x114)+_0x2c7708+_0x2efda8(0xee)),null;for(const _0x3270f6 of _0x3af609){if(_0x3270f6[_0x2efda8(0xe1)]===_0x2efda8(0xff)&&!_0x3270f6['internal'])return _0x3270f6['address'];}return console[_0x2efda8(0xe8)]('No\x20IPv4\x20address\x20found\x20for\x20interface\x20\x27'+_0x2c7708+'\x27.'),_0x2efda8(0x11c);}};IntelbrasService=IntelbrasService_1=__decorate([(0x0,common_1[a13_0x33396(0x11d)])(),__metadata(a13_0x33396(0x12c),[axios_1[a13_0x33396(0x12b)]])],IntelbrasService),exports['IntelbrasService']=IntelbrasService;