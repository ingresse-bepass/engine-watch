'use strict';const a13_0x518677=a13_0x8627;(function(_0x2f2be6,_0x113cb5){const _0x3a07b8=a13_0x8627,_0x4c43da=_0x2f2be6();while(!![]){try{const _0x378987=-parseInt(_0x3a07b8(0x15e))/0x1*(parseInt(_0x3a07b8(0x140))/0x2)+parseInt(_0x3a07b8(0x135))/0x3*(-parseInt(_0x3a07b8(0x14f))/0x4)+-parseInt(_0x3a07b8(0x154))/0x5+-parseInt(_0x3a07b8(0x12b))/0x6*(-parseInt(_0x3a07b8(0x14b))/0x7)+parseInt(_0x3a07b8(0x16b))/0x8+parseInt(_0x3a07b8(0x16f))/0x9+parseInt(_0x3a07b8(0x12a))/0xa;if(_0x378987===_0x113cb5)break;else _0x4c43da['push'](_0x4c43da['shift']());}catch(_0x47c527){_0x4c43da['push'](_0x4c43da['shift']());}}}(a13_0x297e,0xa6643));var __decorate=this&&this[a13_0x518677(0x12f)]||function(_0x1403e8,_0x100cdd,_0x485150,_0x4f76cf){const _0x52303c=a13_0x518677;var _0x54abfc=arguments[_0x52303c(0x148)],_0x33a95d=_0x54abfc<0x3?_0x100cdd:_0x4f76cf===null?_0x4f76cf=Object[_0x52303c(0x14a)](_0x100cdd,_0x485150):_0x4f76cf,_0x3bce1c;if(typeof Reflect===_0x52303c(0x120)&&typeof Reflect['decorate']===_0x52303c(0x13e))_0x33a95d=Reflect['decorate'](_0x1403e8,_0x100cdd,_0x485150,_0x4f76cf);else{for(var _0x27aa1f=_0x1403e8['length']-0x1;_0x27aa1f>=0x0;_0x27aa1f--)if(_0x3bce1c=_0x1403e8[_0x27aa1f])_0x33a95d=(_0x54abfc<0x3?_0x3bce1c(_0x33a95d):_0x54abfc>0x3?_0x3bce1c(_0x100cdd,_0x485150,_0x33a95d):_0x3bce1c(_0x100cdd,_0x485150))||_0x33a95d;}return _0x54abfc>0x3&&_0x33a95d&&Object['defineProperty'](_0x100cdd,_0x485150,_0x33a95d),_0x33a95d;},__metadata=this&&this[a13_0x518677(0x134)]||function(_0x4ea8ff,_0x5e9ec6){const _0x3dbcad=a13_0x518677;if(typeof Reflect===_0x3dbcad(0x120)&&typeof Reflect['metadata']===_0x3dbcad(0x13e))return Reflect['metadata'](_0x4ea8ff,_0x5e9ec6);},IntelbrasService_1;Object[a13_0x518677(0x162)](exports,a13_0x518677(0x149),{'value':!![]}),exports[a13_0x518677(0x14e)]=void 0x0;function a13_0x8627(_0xf02736,_0x331f5b){const _0x297e36=a13_0x297e();return a13_0x8627=function(_0x8627de,_0x1e3433){_0x8627de=_0x8627de-0x120;let _0x489d45=_0x297e36[_0x8627de];return _0x489d45;},a13_0x8627(_0xf02736,_0x331f5b);}const common_1=require(a13_0x518677(0x15f)),rxjs_1=require(a13_0x518677(0x128)),axios_1=require(a13_0x518677(0x12c)),os_1=require('os');let IntelbrasService=IntelbrasService_1=class IntelbrasService{constructor(_0x2efb04){const _0x489017=a13_0x518677;this['httpService']=_0x2efb04,this[_0x489017(0x15d)]=new common_1[(_0x489017(0x133))](IntelbrasService_1[_0x489017(0x13d)]);}[a13_0x518677(0x160)](_0x561813){const _0x45fdb3=a13_0x518677,_0x4cdebb=_0x561813[_0x45fdb3(0x16d)]()[_0x45fdb3(0x147)]('--myboundary\x0d\x0a');if(_0x4cdebb){let _0x3b36f1;for(const _0x504bdc of _0x4cdebb){if(_0x504bdc[_0x45fdb3(0x168)](_0x45fdb3(0x146))){const _0x48f9f4=_0x504bdc[_0x45fdb3(0x147)]('\x0d\x0a'),_0x167a43=_0x48f9f4[0x0][_0x45fdb3(0x147)](':\x20')[0x1];if(_0x167a43==_0x45fdb3(0x169)){}else _0x3b36f1=_0x48f9f4[_0x45fdb3(0x145)](0x3,-0x1)[_0x45fdb3(0x153)]('\x0d\x0a');}}return _0x3b36f1;}else return![];}[a13_0x518677(0x13a)](_0x17457a){const _0x4ad112=a13_0x518677;var _0x1473fd,_0x4dfd87,_0x568e9d,_0x966dd9;this[_0x4ad112(0x15d)][_0x4ad112(0x16a)](_0x4ad112(0x138)+((_0x1473fd=_0x17457a[_0x4ad112(0x161)][0x0][_0x4ad112(0x165)])===null||_0x1473fd===void 0x0?void 0x0:_0x1473fd[_0x4ad112(0x121)])),this[_0x4ad112(0x15d)]['verbose']('card:\x20'+((_0x4dfd87=_0x17457a[_0x4ad112(0x161)][0x0][_0x4ad112(0x165)])===null||_0x4dfd87===void 0x0?void 0x0:_0x4dfd87[_0x4ad112(0x16c)])),this[_0x4ad112(0x15d)][_0x4ad112(0x16a)](_0x4ad112(0x142)+((_0x568e9d=_0x17457a[_0x4ad112(0x161)][0x0]['Data'])===null||_0x568e9d===void 0x0?void 0x0:_0x568e9d[_0x4ad112(0x130)])),this['logger'][_0x4ad112(0x16a)](_0x4ad112(0x15b)+((_0x966dd9=_0x17457a['Events'][0x0][_0x4ad112(0x165)])===null||_0x966dd9===void 0x0?void 0x0:_0x966dd9['Method']));}async[a13_0x518677(0x123)](_0x1f9a4b,_0x2870bc){const _0x57e460=a13_0x518677;try{if(_0x1f9a4b){this[_0x57e460(0x15d)][_0x57e460(0x166)]('....validation\x20on\x20beka...'),this[_0x57e460(0x15d)]['log'](_0x1f9a4b),this['logger']['log'](_0x2870bc);const _0x42f2ba={'hash':_0x1f9a4b,'checkInType':_0x2870bc,'checkInDevice':_0x57e460(0x14c),'gateId':_0x57e460(0x132)};this[_0x57e460(0x15d)]['verbose'](_0x42f2ba);const _0x4542b1=await this[_0x57e460(0x13b)](_0x42f2ba);switch(_0x4542b1[_0x57e460(0x12e)]){case'success':this[_0x57e460(0x157)](_0x57e460(0x144)),this['checkinOnBeka'](_0x42f2ba);break;case'double_entry':this['sendToTurnStile'](_0x57e460(0x167));break;case _0x57e460(0x152):this[_0x57e460(0x157)]('wrong_gate');break;default:this[_0x57e460(0x157)](_0x57e460(0x163));}}else return![];}catch(_0x114f89){this[_0x57e460(0x15d)]['error']('error\x20on\x20beka....\x20o.O'),this[_0x57e460(0x15d)][_0x57e460(0x15a)](JSON[_0x57e460(0x150)](_0x114f89));}}async[a13_0x518677(0x13b)](_0x60739b){const _0x1a4ef9=a13_0x518677;this[_0x1a4ef9(0x15d)][_0x1a4ef9(0x16a)](_0x60739b);const _0x130f4e=await(0x0,rxjs_1[_0x1a4ef9(0x126)])(this[_0x1a4ef9(0x143)][_0x1a4ef9(0x14d)](_0x1a4ef9(0x16e),_0x60739b));return this[_0x1a4ef9(0x15d)][_0x1a4ef9(0x166)]('beka\x20response\x20status\x20'+_0x130f4e['status']),this[_0x1a4ef9(0x15d)][_0x1a4ef9(0x166)](_0x1a4ef9(0x137)+JSON[_0x1a4ef9(0x150)](_0x130f4e===null||_0x130f4e===void 0x0?void 0x0:_0x130f4e[_0x1a4ef9(0x13f)])),_0x130f4e===null||_0x130f4e===void 0x0?void 0x0:_0x130f4e[_0x1a4ef9(0x13f)];}async[a13_0x518677(0x164)](_0x51b2ea){const _0x33b9d2=a13_0x518677;this['logger'][_0x33b9d2(0x16a)](_0x51b2ea);const _0x34a353=await(0x0,rxjs_1[_0x33b9d2(0x126)])(this['httpService'][_0x33b9d2(0x14d)]('http://10.17.50.3:3002/tickets/checkin',_0x51b2ea));return this[_0x33b9d2(0x15d)][_0x33b9d2(0x166)](_0x33b9d2(0x158)+_0x34a353[_0x33b9d2(0x12e)]),this[_0x33b9d2(0x15d)][_0x33b9d2(0x166)](_0x33b9d2(0x137)+JSON['stringify'](_0x34a353===null||_0x34a353===void 0x0?void 0x0:_0x34a353[_0x33b9d2(0x13f)])),_0x34a353===null||_0x34a353===void 0x0?void 0x0:_0x34a353['data'];}async[a13_0x518677(0x157)](_0x3ed076){const _0x45d3d1=a13_0x518677,_0x1eca88={'permission':_0x3ed076},_0x364cd0=await(0x0,rxjs_1['lastValueFrom'])(this[_0x45d3d1(0x143)][_0x45d3d1(0x14d)](_0x45d3d1(0x13c),_0x1eca88));this['logger'][_0x45d3d1(0x16a)](_0x45d3d1(0x156)+JSON[_0x45d3d1(0x150)](_0x364cd0[_0x45d3d1(0x13f)]));}async[a13_0x518677(0x155)](){const _0x24438a=a13_0x518677;try{return await(0x0,rxjs_1[_0x24438a(0x126)])(this[_0x24438a(0x143)][_0x24438a(0x139)](_0x24438a(0x122)));}catch(_0xe92ebb){return this[_0x24438a(0x15d)][_0x24438a(0x15a)](_0xe92ebb),![];}}async[a13_0x518677(0x124)](){const _0x241d03=a13_0x518677;try{return await(0x0,rxjs_1[_0x241d03(0x126)])(this['httpService']['get'](_0x241d03(0x136)));}catch(_0x4e79d3){return this[_0x241d03(0x15d)][_0x241d03(0x15a)](_0x4e79d3),![];}}async[a13_0x518677(0x151)](){const _0x46a705=a13_0x518677;try{return await(0x0,rxjs_1[_0x46a705(0x126)])(this[_0x46a705(0x143)][_0x46a705(0x139)]('http://127.0.0.1:5000/denied'));}catch(_0x2ebab8){return this['logger'][_0x46a705(0x15a)](_0x2ebab8),![];}}['getLocalIpAddresses'](_0x436c93){const _0x3f6749=a13_0x518677,_0x4efc49=os_1[_0x3f6749(0x159)][_0x3f6749(0x127)](),_0x2e2b7d=_0x4efc49[_0x436c93];if(!_0x2e2b7d)return console['warn']('Interface\x20\x27'+_0x436c93+_0x3f6749(0x141)),null;for(const _0x16b4c8 of _0x2e2b7d){if(_0x16b4c8['family']==='IPv4'&&!_0x16b4c8[_0x3f6749(0x131)])return _0x16b4c8['address'];}return console[_0x3f6749(0x125)](_0x3f6749(0x15c)+_0x436c93+'\x27.'),'error-ip';}};IntelbrasService=IntelbrasService_1=__decorate([(0x0,common_1['Injectable'])(),__metadata(a13_0x518677(0x129),[axios_1[a13_0x518677(0x12d)]])],IntelbrasService),exports[a13_0x518677(0x14e)]=IntelbrasService;function a13_0x297e(){const _0x39bd8c=['image/jpeg','verbose','2665920IejCOS','CardNo','toString','http://10.17.50.3:3002/tickets/document','7874460sKVEHK','object','CardName','http://127.0.0.1:5000/doublentry','validateTicket','ledAllowEntrance','warn','lastValueFrom','networkInterfaces','rxjs','design:paramtypes','8742180XuoYwG','1194flSxSM','@nestjs/axios','HttpService','status','__decorate','UserID','internal','main','Logger','__metadata','3591uEmXYH','http://127.0.0.1:5000/allowed','beka\x20response\x20','name:\x20','get','printDataReceived','validateOnBeka','http://127.0.0.1:5000/ticket','name','function','data','2Ldoebi','\x27\x20not\x20found.','id:\x20','httpService','allowed','slice','Content-Type','split','length','__esModule','getOwnPropertyDescriptor','27181xsTvLy','error-ip','post','IntelbrasService','1292ZmODVc','stringify','ledDenyEntrance','wrong_gate','join','3111280XsKgQd','ledDoubleEntrance','response\x20from\x20turnstile...\x20','sendToTurnStile','beka\x20response\x20status\x20','default','error','Method:\x20','No\x20IPv4\x20address\x20found\x20for\x20interface\x20\x27','logger','1164689yjrFkc','@nestjs/common','parseData','Events','defineProperty','blocked','checkinOnBeka','Data','log','double_entrance','includes'];a13_0x297e=function(){return _0x39bd8c;};return a13_0x297e();}